<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Installation | DotCi - Jenkins github integration, .ci.yml.</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="./usage/index.html" />
    
    
    <link rel="prev" href="./index.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="gitbook/style.css">
    
    

        
    <div class="book" data-level="1" data-basepath="." data-revision="Fri May 15 2015 17:15:08 GMT-0500 (CDT)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="1" data-path="Installation.html">
            
                
                    <a href="./Installation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Installation
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="usage/index.html">
            
                
                    <a href="./usage/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        User Guide
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="usage/CreateNewJob.html">
            
                
                    <a href="./usage/CreateNewJob.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Create new DotCI Job
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="usage/ConfigureBuild.html">
            
                
                    <a href="./usage/ConfigureBuild.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Configure Build
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="usage/DotCiYaml.html">
            
                
                    <a href="./usage/DotCiYaml.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        .ci.yml
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="usage/DockerBuild.html">
            
                
                    <a href="./usage/DockerBuild.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.1.</b>
                        
                        Docker Compose
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="usage/InstallPackages.html">
            
                
                    <a href="./usage/InstallPackages.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.2.</b>
                        
                        Install Packages
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="usage/Templating.html">
            
                
                    <a href="./usage/Templating.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.3.</b>
                        
                        Templating .ci.yml
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.3.4" data-path="usage/Shortcuts.html">
            
                
                    <a href="./usage/Shortcuts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.4.</b>
                        
                        Build url shortcuts
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="DevelopmentSetup.html">
            
                
                    <a href="./DevelopmentSetup.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Development Setup
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Extending.html">
            
                
                    <a href="./Extending.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Extending DotCi
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >DotCi - Jenkins github integration, .ci.yml.</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <p><strong>Installation Steps</strong></p>
<ol>
<li><a href="#install-plugin">Install Plugin</a></li>
<li><a href="#mongodb-setup">Mongodb setup</a></li>
<li><a href="#github-application">Github Application</a></li>
<li><a href="#dotci-plugin-configuration">DotCi plugin configuration</a></li>
<li><a href="#configure-package-management">Configure package management</a></li>
</ol>
<h2 id="install-plugin">Install Plugin</h2>
<ul>
<li>Install DotCi plugin from the update center.</li>
</ul>
<h2 id="mongodb-setup">Mongodb setup</h2>
<p>   Install <a href="https://www.mongodb.org/" target="_blank">mongodb</a> accessible to your Jenkins instance.</p>
<h2 id="github-application">Github application</h2>
<ul>
<li>Register an OAuth <a href="https://github.com/settings/applications/new" target="_blank">application</a> with github to obtain Client-ID/Secret.<ul>
<li><code>Authorization callback URL</code> needs to be <code>&lt;YOUR-JENKINS-URL&gt;/dotci/finishLogin</code></li>
</ul>
</li>
</ul>
<h2 id="dotci-plugin-configuration">DotCi plugin configuration</h2>
<p>  Got to <code>Manage Jenkins</code>&gt; <code>Configure System</code> and fill out required information under DotCi Configuration</p>
<p><img src="screenshots/dotci-plugin-configuration.png" alt="dotci setup"></p>
<h2 id="configure-package-management">Configure package management</h2>
<p>There are two options for installing packages that the build needs,</p>
<ul>
<li><strong>Docker</strong> - Install docker on jenkins slaves where builds would run.</li>
<li><p><strong>Non-Docker</strong> - DotCi calls a bash function &apos;install_packages&apos; with requested packages and languages specified in the enviroment
section of .ci.yml. It is up to you to provide implementation of this shell function available to jenkins slave running dotci build.</p>
<p>Here is an example of of install_packages function using rvm for ruby builds</p>
<pre><code class="lang-bash">  <span class="hljs-comment"># A .ci.yml with the following declaration</span>
    environment:
       language: ruby
       language_version: <span class="hljs-number">1.9</span>.<span class="hljs-number">3</span>
    would call install_packages ruby-<span class="hljs-number">1.9</span>.<span class="hljs-number">3</span>
  <span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_packages</span></span>(){
    gemset=`<span class="hljs-built_in">echo</span> <span class="hljs-variable">${PWD##*/}</span> | tr <span class="hljs-string">&apos;,&apos;</span> <span class="hljs-string">&apos;_&apos;</span>`
    <span class="hljs-built_in">set</span> +e
    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$1</span> =~ <span class="hljs-string">&quot;ree&quot;</span> ]]; <span class="hljs-keyword">then</span>
      rvm use `<span class="hljs-built_in">echo</span> <span class="hljs-variable">$1</span> | sed <span class="hljs-operator">-e</span> <span class="hljs-string">&quot;s/^ruby-//g&quot;</span> <span class="hljs-operator">-e</span> <span class="hljs-string">&quot;s/_/-/g&quot;</span>`@<span class="hljs-variable">$gemset</span> --create
    <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$1</span> =~ <span class="hljs-string">&quot;jruby&quot;</span> ]]; <span class="hljs-keyword">then</span>
      rvm use `<span class="hljs-built_in">echo</span> <span class="hljs-variable">$1</span> | sed <span class="hljs-operator">-e</span> <span class="hljs-string">&quot;s/^ruby-//g&quot;</span> <span class="hljs-operator">-e</span> <span class="hljs-string">&quot;s/_/-/g&quot;</span>`@<span class="hljs-variable">$gemset</span> --create
    <span class="hljs-keyword">else</span>
      rvm use `<span class="hljs-built_in">echo</span> <span class="hljs-variable">$1</span> | sed <span class="hljs-operator">-e</span> <span class="hljs-string">&quot;s/_/-/g&quot;</span>`@<span class="hljs-variable">$gemset</span> --create
    <span class="hljs-keyword">fi</span>
    rvm gemset empty --force
    <span class="hljs-built_in">set</span> <span class="hljs-operator">-e</span>
  }
</code></pre>
</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./index.html" class="navigation navigation-prev " aria-label="Previous page: Introduction"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./usage/index.html" class="navigation navigation-next " aria-label="Next page: User Guide"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
